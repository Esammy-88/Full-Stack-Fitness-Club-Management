{% extends "base.html" %}
{% block title %}My Profile{% endblock %}
{% block content %}
<div class="container my-4">
    <h2 class="mb-4"><i class="fas fa-user-edit"></i> My Profile</h2>
    
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Personal Information</h5>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <input type="hidden" name="action" value="update_info">
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" value="{{ profile[0] }}" disabled>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-control" value="{{ profile[1] }}" disabled>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-control" value="{{ profile[2] }}" disabled>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Phone</label>
                            <input type="tel" class="form-control" name="phone" value="{{ profile[5] }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Address</label>
                            <textarea class="form-control" name="address" rows="2">{{ profile[6] }}</textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Update Info</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 mb-4">
            <div class="card shadow">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Add Fitness Goal</h5>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <input type="hidden" name="action" value="add_goal">
                        <div class="mb-3">
                            <label class="form-label">Goal Type</label>
                            <input type="text" class="form-control" name="goal_type" placeholder="e.g., Weight Loss" required>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Current Value</label>
                                <input type="number" step="0.01" class="form-control" name="current_value" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Target Value</label>
                                <input type="number" step="0.01" class="form-control" name="target_value" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Target Date</label>
                            <input type="date" class="form-control" name="target_date" required>
                        </div>
                        <button type="submit" class="btn btn-success">Add Goal</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card shadow">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">Log Health Metrics</h5>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <input type="hidden" name="action" value="add_metric">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Weight (lbs)</label>
                                <input type="number" step="0.1" class="form-control" name="weight">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Heart Rate (bpm)</label>
                                <input type="number" class="form-control" name="heart_rate">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Blood Pressure</label>
                            <input type="text" class="form-control" name="blood_pressure" placeholder="120/80">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Body Fat %</label>
                            <input type="number" step="0.1" class="form-control" name="body_fat">
                        </div>
                        <button type="submit" class="btn btn-info">Log Metrics</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 mb-4">
            <div class="card shadow">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">Recent Metrics</h5>
                </div>
                <div class="card-body">
                    {% if metrics %}
                        {% for m in metrics %}
                        <div class="mb-3 pb-3 border-bottom">
                            <small class="text-muted">{{ m[1] }}</small><br>
                            <strong>Weight:</strong> {{ m[2] }} lbs | <strong>HR:</strong> {{ m[3] }} bpm
                        </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted">No metrics recorded yet.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}